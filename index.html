<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bezzi Eyewear Products</title>
    <!-- Bootstrap CSS for styling -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Custom styles for product cards and other elements */
        .product-card {
            border: 1px solid #bbb;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease-in-out;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .product-card img {
            width: 100%;
            height: 220px;
            object-fit: cover;
        }

        .product-price del {
            color: gray;
        }

        .product-price span {
            color: red;
            font-weight: bold;
        }

        .pagination {
            justify-content: center;
        }

        .logo-img {
            height: 140px;
            width: auto;
            object-fit: contain;
            display: block;
        }

        .navbar {
            padding-top: 0.1rem;
            padding-bottom: 0.1rem;
            min-height: 100px;
            align-items: center;
        }

        .carousel-control-prev-icon,
        .carousel-control-next-icon {
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
        }
    </style>
</head>

<body class="bg-light">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white px-3 shadow-sm">
        <a class="navbar-brand d-flex align-items-center" href="#">
            <img src="uploads/logo.png" alt="Bezzi Logo" class="logo-img">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMenu">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarMenu"></div>

        <!-- Gender and Type Filters -->
        <div class="col-md-4">
            <select id="genderFilter" class="form-select">
                <option value="">Filter by Gender</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>
        </div>
        <div class="col-md-4">
            <select id="typeFilter" class="form-select">
                <option value="">Filter by Type</option>
                <option value="sunglasses">Sunglasses</option>
                <option value="optical">Optical</option>
            </select>
        </div>
    </nav>

    <!-- Page Title -->
    <h2 class="text-center py-3">Bezzi Eyewear Products</h2>

    <!-- Filters and Search Bar -->
    <div class="container py-4">
        <div class="row mb-4">
            <div class="col-md-6">
                <input type="text" id="searchBar" class="form-control" placeholder="Search by title...">
            </div>
            <div class="col-md-6">
                <select id="categoryFilter" class="form-select">
                    <option value="">Filter by Category</option>
                    <option>Rayban</option>
                    <option>Rayban Ferrari</option>
                    <option>Rayban Marshall</option>
                    <option>Emporio Armani</option>
                    <option>Rayban Optics</option>
                    <option>Ralph Lauren</option>
                    <option>Persol</option>
                    <option>Lacoste</option>
                    <option>Tom Ford</option>
                    <option>Guess</option>
                    <option>Versace</option>
                    <option>Jaguar</option>
                    <option>Burberry</option>
                    <option>Hugo Boss</option>
                    <option>Carrera</option>
                    <option>Police</option>
                    <option>Prada</option>
                </select>
            </div>
        </div>

        <!-- Product Container -->
        <div id="productContainer" class="row g-4"></div>

        <!-- Pagination -->
        <nav>
            <ul id="pagination" class="pagination mt-4"></ul>
        </nav>
    </div>

    <!-- JS Libraries -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JavaScript -->
    <script>
        // Array of products (list all products as given initially)
        const products = [
            {
                title: "Rayban Ferrari Red RB8331-MF001/71",
                category: "Rayban Ferrari",
                price: 250,
                discount: 200,
                images: ["uploads/Raybanferr2.png", "uploads/raybanferr3.png", "uploads/raybanferr4.jpg"]
            },
            {
                title: "Rayban Marshall RB 3648-M The Marshall || 004/71",
                category: "Rayban Marshall",
                price: 220,
                discount: 180,
                images: ["uploads/raybanm1.jpg", "uploads/raybanm2.jpg"]
            },
            {
                title: "Rayban Marshall RB 3648-M The Marshall || 002/58",
                category: "Rayban Marshall",
                price: 260,
                discount: 210,
                gender: "male",
                type: "sunglasses",
                images: ["uploads/raybanm4.png", "uploads/raybanm3.png"]
            },
            {
                title: "Rayban RB3663 004/3M",
                category: "Rayban",
                price: 200,
                discount: 175,
                images: ["uploads/ray66.jpg", "uploads/ray67.jpg"]
            },
            {
                title: "Ralph Lauren RA 5322U 5536/87",
                category: "Ralph Lauren",
                price: 190,
                discount: 140,
                images: ["uploads/Ralph2.jpg", "uploads/Ralph1.jpg"]
            },
            {
                title: "Rayban Ferrari Yellow RB3726-M F088/5J",
                category: "Rayban Ferrari",
                price: 220,
                discount: 195,
                images: ["uploads/Raybanferr1.png", "uploads/raybanferr5.jpg", "uploads/raybanferr6.jpg"]
            },
            {
                title: "Rayban Classic RB7680S 90131 51",
                category: "Rayban",
                price: 200,
                discount: 175,
                images: ["uploads/raybancateye.jpg", "uploads/raybancateye2.jpg"]
            },
            {
                title: "Rayban Cateye RB4457D 667/87",
                category: "Rayban",
                price: 380,
                discount: 346,
                images: ["uploads/Rayban Classic.png", "uploads/raybanultra.png"]
            },
            {
                title: "Rayban RB4435 901/31 56",
                category: "Rayban",
                price: 210,
                discount: 182,
                image: "uploads/rayban2.png"
            },
            {
                title: "Rayban RB4407 67304L 57",
                category: "Rayban",
                price: 220,
                discount: 194,
                image: "uploads/rayban3.png"
            },
            {
                title: "Rayban Classic Rayban RB4392D 601/87 66",
                category: "Rayban",
                price: 190,
                discount: 164,
                images: ["uploads/rayban6.png", "uploads/raybannew.png"]
            },
            {
                title: "Rayban RB4392D 645087 66",
                category: "Rayban",
                price: 190,
                discount: 164,
                image: "uploads/rayban4.png"
            },
            {
                title: "Rayban RB4392D 645087 66",
                category: "Rayban",
                price: 220,
                discount: 195,
                image: "uploads/rb1.png"
            },
            {
                title: "Rayban RB2283 902/31 55",
                category: "Rayban",
                price: 230,
                discount: 207,
                image: "uploads/rb2.jpg"
            },
            {
                title: "Rayban RB2132F 604287 52",
                category: "Rayban",
                price: 240,
                discount: 210,
                images: ["uploads/rayban63.png", "uploads/rayban67.png"]
            },
            {
                title: "Persol 3205S 95/31",
                category: "Persol",
                price: 370,
                discount: 300,
                images: ["uploads/persol1.jpg", "uploads/persol2.jpg"]
            },
            {
                title: "Lacoste L807S 214",
                category: "Lacoste",
                price: 220,
                discount: 195,
                images: ["uploads/lacoste1.jpg", "uploads/lacoste2.jpg"]
            },
            {
                title: "Tom Ford FT0617 05C",
                category: "Tom Ford",
                price: 400,
                discount: 350,
                images: ["uploads/tomford1.jpg", "uploads/tomford2.jpg"]
            },
            {
                title: "Guess GU7597S 53",
                category: "Guess",
                price: 150,
                discount: 130,
                images: ["uploads/guess1.jpg", "uploads/guess2.jpg"]
            }
        ];

        const perPage = 12; // Number of products per page
        let currentPage = 1; // Current page

        // Function to display products on the page
        function displayProducts(filteredProducts) {
            const container = $("#productContainer");
            container.empty();
            const start = (currentPage - 1) * perPage;
            const end = start + perPage;
            const pageItems = filteredProducts.slice(start, end);
            pageItems.forEach((p, index) => {
                let imageHTML = "";
                if (p.images && Array.isArray(p.images)) {
                    const carouselId = `carousel-${currentPage}-${index}`;
                    imageHTML = `
                        <div id="${carouselId}" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                ${p.images.map((img, i) => `
                                    <div class="carousel-item ${i === 0 ? 'active' : ''}">
                                        <img src="${img}" class="d-block w-100" alt="${p.title}">
                                    </div>
                                `).join('')}
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#${carouselId}" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon"></span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#${carouselId}" data-bs-slide="next">
                                <span class="carousel-control-next-icon"></span>
                            </button>
                        </div>
                    `;
                } else {
                    imageHTML = `<img src="${p.images[0]}" class="card-img-top" alt="${p.title}">`;
                }

                container.append(`
                    <div class="col-md-4">
                        <div class="card product-card">
                            ${imageHTML}
                            <div class="card-body">
                                <h5 class="card-title">${p.title}</h5>
                                <p class="card-text text-muted">${p.category}</p>
                                <p class="product-price"><del>€${p.price}</del> <span>€${p.discount}</span></p>
                            </div>
                        </div>
                    </div>
                `);
            });
        }

        // Function to update pagination
        function updatePagination(filteredProducts) {
            const totalPages = Math.ceil(filteredProducts.length / perPage);
            const pagination = $("#pagination");
            pagination.empty();
            for (let i = 1; i <= totalPages; i++) {
                pagination.append(`
                    <li class="page-item ${i === currentPage ? 'active' : ''}">
                        <a class="page-link" href="#">${i}</a>
                    </li>
                `);
            }
            $(".page-link").click(function (e) {
                e.preventDefault();
                currentPage = parseInt($(this).text());
                applyFilters();
            });
        }

        // Function to apply filters and search
        function applyFilters() {
            const searchTerm = $("#searchBar").val().toLowerCase();
            const selectedCategory = $("#categoryFilter").val();
            const filtered = products.filter(p => {
                const matchesSearch = p.title.toLowerCase().includes(searchTerm);
                const matchesCategory = selectedCategory === "" || p.category === selectedCategory;
                return matchesSearch && matchesCategory;
            });

            displayProducts(filtered);
            updatePagination(filtered);
        }

        // Initialize filters on page load
        $(document).ready(() => {
            applyFilters();

            // Apply filters when the user types in the search bar or changes category
            $("#searchBar, #categoryFilter").on("input change", function () {
                currentPage = 1;
                applyFilters();
            });
        });
    </script>
</body>

</html>
